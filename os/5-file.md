# 📁 File System

`OS` 는 다양한 파일들이 존재합니다. 노트북의 바탕화면만 봐도 당장 내일 제출해야하는 `진짜최종.hwp` 같은 파일들이 있는데, 이 파일들은 전부 하드디스크에 저장됩니다. 파일을 보관하고 불러오는 과정을 사용자가 직접하게되면 그 과정에서 파일이 손상될 수 있기 때문에 파일을 관리하는 일은 운영체제의 `File System` 이 하게됩니다. `File System` 은 고유한 `File Table` 을 가지고 파일을 관리합니다. 
`File Table`에는 어느 위치에 어떤 파일이 존재하는지 기록되어있습니다.

파일 시스템이 하는 일은 아래와 같습니다.
|기능|설명|
|-|-|
|파일 구성|사용자의 요구에 따라서 파일과 디렉터리를 만듭니다.
|파일 관리|파일 생성, 수정, 삭제등의 관리를 진행합니다.
|접근 관리| 사용자에게 파일에 접근할 수 있는 방법을 제공합니다.
|백업과 복구| 사고로 부터 보호하기 위해서 파일을 백업을 해둡니다.
|암호화| 파일을 암호화하여 악의적인 접근으로부터 보호합니다.

### File Classification
파일에는 두가지 종류가 있습니다. **실행파일(execute file)** 은 메모리에 직접올라가서 프로세스가 되는 파일을 의미합니다. `한글과 컴퓨터` 같은 프로그램 파일이 대표적입니다. **데이터 파일(data file)** 은 실행 프로그램이 프로그램에 표시하기 위해 필요한 데이터가 저장되어있는 파일을 의미합니다. 위에서 설명했던 `진짜최종.hwp` 는 `한글과 컴퓨터` 가 읽어내는 `데이터 파일` 입니다.

### File Structure
파일은 데이터의 집합으로 구성되어있습니다. 이 파일을 읽을 때 읽는 방식에 따라 방법이 나뉩니다.
####  1. Sequential File Structure
`순차파일 구조(Sequential File Structure)` 데이터가 일렬로 나열되어있는 구조를 의미합니다. 대표적으로 카세트 테이프가 있습니다.
![](https://cloudfront-ap-northeast-1.images.arcpublishing.com/chosun/64ENVEREV23JVXVJZ3AA2EQLMQ.jpg) 

카세트 테이프의 특징으로는 처음부터 끝까지 데이터가 기록되어있고 특정 위치에 기록되어있는 부분으로 가려면 카세트 테이프를 돌려야합니다.

이렇게 데이터를 읽어내는 방식을 `Sequential Access` 라고합니다.

`Sequential Access` 를 사용하면 데이터를 기록할 때 낭비되는 부분이 없지만 
중간 데이터를 삭제했을 때 빈 공간을 매우기 위해서 뒤에 데이터를 모두 당겨와야한다는 단점이 있습니다.

#### 2. Index File Structure
`index file structure` 는 `Sequential File Structure` 에서 데이터의 시작 부분을 `index file` 이 가지고 있으면서 관리하는 방식입니다. 
3번 데이터에 접근하고싶을 때 처음부터 탐색하지않고 `index file` 에 접근해서 3번 파일이 어디부터 시작하는지 알아온 후 그 부분으로 바로 접근하는 원리입니다. 

`Index File` 은 하나의 `Data File` 에 여러개 존재 할 수 있습니다. 
정렬 방식에 따라 `Index File` 을 여러개 만들어두면 접근 할 때 빠르게 접근이 가능합니다.

#### 3. Direct File Structure
`직접 파일 구조(Direct File Structure)` 는 저장하려는 데이터의 특정 값을 물리적인 주소값과 연결시켜서 저장하는 방식입니다. 예를 들어서 학번을 10으로 나누어서 나오는 나머지를 가지고 주소 저장한다고 하면 학번 19인 학생은 저장장치 9번에 13인 학생을 저장장치 3번에 저장됩니다. 이러한 방식은 `Hash Function` 을 이용해서 이루어지며 데이터의 값으로 저장하기 때문에 `Index File` 이 필요없고 접근이 굉장히 빠릅니다. 하지만 `Hash Function` 이 저장공간에 데이터를 고르게 분포할 수 있어야하기 때문에 이 부분의 해결이 어렵습니다. 데이터가 고르게 분포되지않으면 저장장치 중간중간에 구멍이 생겨 공간이 낭비되기 때문입니다.